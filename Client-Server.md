Взаимодействие клиента с сервером.



1) Eureka Client регистрирует информацию о запущенном экземпляре на сервере Eureka.
2) Каждые 30 секунд клиент шлет запрос на сервер и информирует сервер о том, что экземпляр еще жив. Если Eureka Server не видел обновления в течение 90 секунд, он удаляет экземпляр из своего реестра.

eureka:
 instance:
  lease-expiration-duration-in-seconds: 100
3) Eureka Client получает информацию реестра от сервера и кэширует ее у себя локально. Эта информация обновляется периодически (каждые 30 секунд), получая обновления между последним апдейтом и текущим. Клиент автоматически обрабатывает дублирующую информацию.
4) Получив обновления, клиент сверяет информацию с сервером, сравнивая количество экземпляров, возвращаемых сервером, и если информация по какой-либо причине не совпадает, вся информация реестра извлекается снова. Клиент получает информацию в сжатом формате JSON, используя клиент jersey apache.
5) При завершении работы клиент отправляет запрос отмены на сервер. Таким образом экземпляр удаляется из реестра экземпляров сервера. Eureka Server использует протокол, который требует, чтобы клиенты выполняли явное действие отмены регистрации.
DiscoveryManager.getInstance().shutdownComponent()
Клиенты, которые использовали 3 неудачные попытки синхронизации с сервером с интервалом в 30 секунд будут удалены автоматически.
Вы также можете указать свое время, по которому сервер будет ожидать эхо запрос от клиента о том что он жив (по умолчанию 30 секунд):

eureka:
 server:
  expected-client-Renewal-interval-seconds: 20
По умолчанию Eureka Client используют Jersey и Jackson вместе с JSON для связи с Eureka Server. Также можно переопределить механизм по умолчанию, чтобы настроить свой собственный способ передачи данных.
 
Следующие ниже свойства определяют, как клиенты должны подключаться к серверам eureka. Как правило, они могут быть одинаковыми для всех клиентов в одной экосистеме eureka, либо для одних одни правила а для другие другие.

Если вы хотите использовать поиск на основе DNS для определения других серверов eureka, укажите следующее:
eureka:
  shouldUseDns: true
Но если параметр shouldUseDns имеет значение false, мы будем использовать следующие свойства для явного указания маршрута к серверам eureka, например так:
eureka:
 client:
   serviceUrl:
     defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/
Если у вас на клиенте есть собственная клиентская конфигурация, то на стороне сервера eureka установите для обновления по требованию значение в false:

eureka:
  shouldOnDemandUpdateStatusChange: false


  

Eureka Client и Eureka Server - это две компоненты библиотеки Netflix OSS, которые используются для регистрации и обнаружения микросервисов в распределенной системе.

Когда микросервис запускается, он регистрируется в Eureka Server. Eureka Client на каждом узле микросервиса периодически опрашивает Eureka Server для получения списка доступных микросервисов. Если какой-то микросервис не отвечает на запросы, Eureka Client помечает его как "недоступный" и исключает из списка доступных микросервисов.

Когда микросервис хочет обратиться к другому микросервису, он использует имя этого микросервиса вместо его IP-адреса. Eureka Client перехватывает этот запрос и использует Eureka Server для поиска IP-адреса нужного микросервиса. Если микросервис недоступен, Eureka Client выбирает другой доступный микросервис с тем же именем.

Eureka Client также позволяет микросервисам определять свою конфигурацию и настройки через Eureka Server. Это позволяет облегчить процесс настройки и управления конфигурацией в распределенной системе.

В целом, Eureka Client и Eureka Server обеспечивают простой и эффективный механизм для регистрации, обнаружения и управления микросервисами в распределенной системе.



Вдруг кто-то тоже восзищается пожачей материала на курсе. Оставлю ссылку здесь, что бы была альтернатива
https://www.youtube.com/playlist?list=PL8X2nqRlWfaZcyrJrsrWmQ17vtagWKv3f
